# ADR-008: JSDoc 문서화 표준 수립

## 상태
승인됨 (2025-09-21)

## 컨텍스트

미니 노션 프로젝트는 복잡한 실시간 협업 기능과 에디터 시스템을 포함하고 있어, 코드의 복잡성이 높습니다. 특히 다음과 같은 문제들이 발생하고 있었습니다:

### 현재 상황
- Y.js, Tiptap, 실시간 협업 등 복잡한 라이브러리 사용
- 커스텀 훅과 유틸리티 함수의 사용법이 불명확
- API 함수의 매개변수와 반환값 의미 파악 어려움
- 새로운 팀원의 온보딩 시간 증가
- 코드 리뷰 시 함수 동작 이해에 시간 소요

### 해결해야 할 문제
1. **복잡한 비즈니스 로직 이해 어려움**: Y.js 동기화, 에디터 확장 등
2. **API 사용법 불명확**: 매개변수 타입과 의미, 에러 조건 등
3. **커스텀 훅 사용법 부족**: 반환값과 사용 시나리오 불분명
4. **타입 추론 한계**: TypeScript만으로는 함수 의도 파악 어려움
5. **팀 지식 공유 부족**: 개발자 개인 지식에 의존

### 제약사항 및 요구사항
- TypeScript strict 모드 사용으로 타입 안전성 확보
- ESLint 자동화를 통한 일관성 보장 필요
- 개발 속도 저하 최소화
- 기존 코드베이스와의 호환성 유지

## 결정

**JSDoc 기반 코드 문서화 표준을 수립하고 ESLint 자동화를 통해 강제한다.**

핵심 결정사항:
1. 외부 공개 API 함수, 복잡한 비즈니스 로직, 공통 유틸리티 함수에 JSDoc 필수 적용
2. 미니 노션 특화 태그 시스템 도입 (`@yjs`, `@collaboration`, `@editor` 등)
3. ESLint JSDoc 플러그인으로 문서화 품질 자동 검증
4. 실제 사용 예시 포함을 통한 실용적 문서화

## 고려된 옵션들

### 옵션 1: 별도 문서화 도구 (TypeDoc, Storybook)
**장점:**
- 전용 문서 사이트 생성 가능
- 풍부한 문서화 기능
- 시각적으로 우수한 문서

**단점:**
- 코드와 문서 분리로 동기화 문제
- 추가 빌드 프로세스 필요
- 개발자가 별도 도구 학습 필요
- 문서 업데이트 누락 위험

### 옵션 2: README 기반 문서화
**장점:**
- 간단하고 직관적
- Git으로 버전 관리 용이
- 별도 도구 불필요

**단점:**
- 함수별 세부 문서화 어려움
- 코드와 문서 분리
- 자동화 어려움
- 검색 및 참조 불편

### 옵션 3: JSDoc 인라인 문서화 (선택됨)
**장점:**
- 코드와 문서가 함께 위치하여 동기화 용이
- TypeScript와 완벽 호환
- ESLint로 자동 검증 가능
- IDE에서 즉시 확인 가능
- 기존 JavaScript/TypeScript 생태계 표준

**단점:**
- 코드 길이 증가
- 작성 초기 시간 투자 필요
- 일관성 유지 노력 필요

## 결정 근거

### 1. 기술적 근거
- **TypeScript 통합**: JSDoc은 TypeScript와 네이티브 호환되어 타입 정보와 문서가 일치
- **IDE 지원**: VS Code, WebStorm 등에서 즉시 문서 확인 가능
- **자동화 가능**: ESLint 플러그인으로 문서화 품질 자동 검증
- **표준 준수**: JavaScript/TypeScript 생태계의 사실상 표준

### 2. 비즈니스 근거
- **개발 효율성**: 함수 사용법을 즉시 파악하여 개발 속도 향상
- **온보딩 시간 단축**: 새로운 팀원이 코드 이해 시간 단축
- **유지보수성**: 코드 변경 시 문서도 함께 업데이트되어 일관성 유지
- **품질 향상**: 명확한 문서화로 버그 발생률 감소

### 3. 팀 역량 고려사항
- **학습 곡선**: 팀원들이 이미 JSDoc에 익숙함
- **도구 친숙도**: ESLint, TypeScript 등 기존 도구와 연계
- **점진적 적용**: 기존 코드에 점진적으로 적용 가능

### 4. 장기적 관점
- **확장성**: 프로젝트 규모 증가에 따른 문서화 요구 대응
- **지속가능성**: 코드와 함께 관리되어 장기적 유지 용이
- **표준화**: 팀 전체의 일관된 문서화 문화 구축

## 결과 및 영향

### 긍정적 결과
1. **개발 생산성 향상**
   - 함수 사용법 즉시 파악으로 개발 속도 20-30% 향상 예상
   - 코드 리뷰 시간 단축

2. **코드 품질 개선**
   - 명확한 문서화로 API 오용 방지
   - 복잡한 로직의 이해도 향상

3. **팀 협업 강화**
   - 지식 공유 문화 정착
   - 새로운 팀원 온보딩 시간 50% 단축 예상

4. **유지보수성 향상**
   - 코드 변경 시 영향도 파악 용이
   - 레거시 코드 이해도 향상

### 부정적 결과 및 위험
1. **초기 작성 부담**
   - 기존 코드에 문서 추가 작업 필요
   - 개발 초기 속도 일시적 저하

2. **일관성 유지 어려움**
   - 팀원별 문서화 스타일 차이 발생 가능
   - 문서 업데이트 누락 위험

3. **코드 길이 증가**
   - 파일 크기 증가로 가독성 저하 우려
   - 스크롤 양 증가

### 완화 방안
1. **점진적 적용**
   - 새로운 코드부터 적용 시작
   - 기존 코드는 수정 시점에 문서 추가

2. **자동화 강화**
   - ESLint 규칙으로 문서화 품질 자동 검증
   - Pre-commit hook으로 누락 방지

3. **템플릿 제공**
   - 함수 유형별 JSDoc 템플릿 제공
   - VS Code 스니펫으로 작성 편의성 향상

4. **정기 리뷰**
   - 월간 문서화 품질 리뷰 진행
   - 팀 피드백 수집 및 개선

## 구현 계획

### Phase 1: 기반 구축 (1주)
- [ ] ESLint JSDoc 플러그인 설정
- [ ] JSDoc 가이드라인 문서 작성
- [ ] VS Code 스니펫 및 템플릿 제공

### Phase 2: 핵심 모듈 적용 (2주)
- [ ] 공통 유틸리티 함수 문서화
- [ ] API 컨트롤러 및 서비스 문서화
- [ ] 커스텀 훅 문서화

### Phase 3: 전체 적용 (4주)
- [ ] 에디터 관련 함수 문서화
- [ ] 실시간 협업 함수 문서화
- [ ] 복잡한 비즈니스 로직 문서화

### Phase 4: 품질 향상 (지속)
- [ ] 문서화 품질 모니터링
- [ ] 팀 피드백 수집 및 개선
- [ ] 가이드라인 업데이트

## 관련 결정
- **ADR-002**: React 19 + Vite 조합 (TypeScript 환경과 연계)
- **ADR-006**: 테스트 전략 (문서화된 함수의 테스트 작성 용이)

## 측정 지표
1. **문서화 커버리지**: 외부 공개 함수 대비 JSDoc 작성 비율
2. **개발 생산성**: 새로운 기능 개발 시간 측정
3. **온보딩 시간**: 새로운 팀원의 첫 PR까지 소요 시간
4. **코드 리뷰 시간**: PR 리뷰 완료까지 평균 시간

## 참고 자료
- [JSDoc 공식 문서](https://jsdoc.app/)
- [TypeScript JSDoc 지원](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)
- [ESLint JSDoc 플러그인](https://github.com/gajus/eslint-plugin-jsdoc)
- [Google JavaScript 스타일 가이드 - JSDoc](https://google.github.io/styleguide/jsguide.html#jsdoc)