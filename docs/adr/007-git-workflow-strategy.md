# ADR-007: Git 워크플로우 전략

## Status
**Accepted** - 2025년 9월 21일

## Context

미니 노션 프로젝트는 혼자 개발하는 포트폴리오 프로젝트로, 체계적인 개발 프로세스와 깔끔한 Git 히스토리 관리가 필요합니다. 프로젝트는 Spec 기반 개발 방법론을 사용하며, 각 기능을 독립적인 브랜치에서 개발한 후 PR을 통해 main 브랜치에 통합하는 방식을 채택했습니다.

### 고려사항
- **혼자 개발**: 팀 협업보다는 개인 생산성과 포트폴리오 효과에 집중
- **Spec 기반 개발**: 각 Spec을 여러 Feature 단위로 세분화하여 개발
- **포트폴리오 목적**: 전문적이고 체계적인 개발 프로세스 시연 필요
- **장기 프로젝트**: 8-10주 개발 기간 동안 일관된 워크플로우 유지

### 결정이 필요한 영역
1. **브랜치 전략**: Spec 단위 vs Feature 단위 브랜치
2. **Merge 전략**: Squash vs Rebase vs Merge commit
3. **PR 관리**: 라벨링, Draft 사용, 템플릿 구조
4. **코드 품질**: 커밋 메시지 검증, 자동화 수준

## Decision

### 1. 브랜치 전략
- **Spec 00**: 단일 브랜치 (`feature/00-project-setup`)
- **Spec 01+**: Feature 단위 세분화 (`feature/{spec번호}-{기능명}`)
- **명명 규칙**: `feature/01-jwt-setup`, `feature/03-editor-core`, `feature/05-yjs-integration`

### 2. Merge 전략
- **Squash Merge 전용**: 모든 PR을 Squash로 머지
- **깔끔한 히스토리**: 각 커밋이 완성된 기능을 나타냄
- **롤백 용이성**: 기능 단위 되돌리기 가능

### 3. PR 관리
- **수동 라벨링**: 상황에 맞는 라벨 선택 (`--label "feature,auth"`)
- **상황별 Draft**: 큰 기능은 Draft, 작은 기능은 바로 Ready
- **3개 PR 템플릿**: 기본, 에디터, 버그수정 템플릿 제공

### 4. 코드 품질 관리
- **Commitlint 도입**: 커밋 메시지 규칙 자동 검증
- **Conventional Commits**: `feat(auth): JWT 토큰 생성 로직 구현` 형식 강제
- **Pre-commit Hook**: 커밋 시 자동 검증

## Alternatives Considered

### 브랜치 전략 대안
1. **Spec 단위 브랜치**: 너무 큰 단위로 리뷰 어려움
2. **Task 단위 브랜치**: 너무 작은 단위로 PR 개수 과다
3. **Feature 단위 브랜치**: ✅ 적절한 크기와 독립성 보장

### Merge 전략 대안
1. **Rebase Merge**: 모든 커밋 보존하지만 노이즈 많음
2. **Merge Commit**: 브랜치 히스토리 복잡성 증가
3. **Squash Merge**: ✅ 깔끔한 선형 히스토리, 포트폴리오 효과

### 자동화 수준 대안
1. **완전 자동화**: PR 자동 라벨링, 자동 머지 등
2. **수동 관리**: 모든 것을 수동으로 처리
3. **선택적 자동화**: ✅ 핵심 품질 관리만 자동화

## Consequences

### 긍정적 효과

#### 개발 생산성
- **명확한 작업 단위**: Feature 단위 브랜치로 집중도 향상
- **빠른 피드백**: 적절한 PR 크기로 빠른 자가 리뷰 가능
- **병렬 개발**: 독립적인 기능들을 동시에 작업 가능

#### 코드 품질
- **일관된 커밋 메시지**: Commitlint로 표준화된 메시지 형식
- **깔끔한 히스토리**: Squash merge로 의미 있는 커밋만 유지
- **체계적 문서화**: PR 템플릿으로 변경사항 명확히 기록

#### 포트폴리오 효과
- **전문성 어필**: 체계적인 개발 프로세스 시연
- **추적 가능성**: 각 기능의 개발 과정과 의사결정 기록
- **확장성**: 팀 협업 시에도 적용 가능한 워크플로우

### 부정적 효과

#### 초기 오버헤드
- **설정 시간**: Commitlint, PR 템플릿 등 초기 설정 필요
- **학습 곡선**: GitHub CLI 명령어와 워크플로우 숙달 필요
- **추가 단계**: PR 생성, 라벨링 등 추가 작업

#### 유연성 제약
- **커밋 메시지 제약**: Conventional Commits 형식 강제
- **브랜치 명명 규칙**: 일관된 명명 규칙 준수 필요
- **템플릿 작성**: PR 생성 시 템플릿 내용 작성 필요

### 위험 요소 및 완화 방안

#### 위험: 워크플로우 복잡성으로 인한 개발 속도 저하
**완화 방안**: 
- GitHub CLI 별칭 설정으로 명령어 단순화
- 자주 사용하는 패턴을 스크립트로 자동화
- 필요시 워크플로우 단순화 가능

#### 위험: 혼자 개발에 과도한 프로세스
**완화 방안**:
- 상황별 선택적 적용 (Draft PR, 템플릿 선택)
- 작은 수정사항은 간소화된 프로세스 적용
- 프로젝트 진행에 따라 유연하게 조정

## Implementation

### 즉시 적용 사항
1. **Commitlint 설정**: `@commitlint/config-conventional` 설치 및 설정
2. **PR 템플릿 생성**: 기본, 에디터, 버그수정 템플릿 작성
3. **GitHub CLI 설정**: 자주 사용하는 명령어 별칭 설정

### 점진적 적용 사항
1. **워크플로우 숙달**: 첫 몇 개 PR로 프로세스 익히기
2. **템플릿 개선**: 사용하면서 템플릿 내용 최적화
3. **자동화 확장**: 필요시 추가 자동화 도구 도입

### 성공 지표
- **일관된 커밋 메시지**: 모든 커밋이 Conventional Commits 형식 준수
- **체계적인 PR**: 모든 PR이 적절한 템플릿과 라벨 사용
- **깔끔한 히스토리**: main 브랜치의 선형적이고 의미 있는 커밋 히스토리

## References

- [Conventional Commits 명세](https://www.conventionalcommits.org/)
- [GitHub CLI 문서](https://cli.github.com/manual/)
- [Git 워크플로우 가이드](.kiro/steering/git-workflow.md)
- [커밋 가이드라인](.kiro/steering/commit-guidelines.md)

## Related ADRs

- [ADR-004: 모노레포 구조](004-monorepo-structure.md) - 프로젝트 구조와 브랜치 전략 연관
- [ADR-006: 테스팅 전략](006-testing-strategy.md) - PR 검증 프로세스와 연관

---

**최종 업데이트**: 2025년 9월 21일  
**다음 리뷰 예정**: 프로젝트 중간 지점 (4-5주 후)