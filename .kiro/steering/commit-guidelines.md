---
inclusion: always
---

# 커밋 메시지 가이드라인

미니 노션 프로젝트의 일관되고 명확한 커밋 메시지 작성을 위한 표준 가이드라인입니다. 모든 커밋은 이 규칙을 준수하여 프로젝트 히스토리의 가독성과 추적성을 보장해야 합니다.

## 기본 커밋 메시지 구조

### 표준 형식
```
<타입>(<범위>): <제목>

<본문>

<푸터>
```

### 한글 로그 메시지 형식
```
<타입>(<범위>): <한글 제목>

<한글 본문 설명>

<푸터>
```

**예시**:
```
feat(editor): 슬래시 커맨드 블록 선택 기능 추가

사용자가 에디터에서 '/' 입력 시 블록 타입을 선택할 수 있는 
드롭다운 메뉴를 구현했습니다. 텍스트, 헤딩, 리스트 등 
기본 블록 타입을 지원합니다.

- 키보드 네비게이션 지원 (화살표 키, Enter, Escape)
- 검색 필터링 기능 추가
- 접근성 ARIA 레이블 적용

Closes #123
```

## 커밋 타입 (Type)

### 필수 타입
- **feat**: 새로운 기능 추가
- **fix**: 버그 수정
- **docs**: 문서 변경 (README, 가이드라인 등)
- **style**: 코드 포맷팅, 세미콜론 누락 등 (기능 변경 없음)
- **refactor**: 코드 리팩토링 (기능 변경 없음)
- **test**: 테스트 추가 또는 수정
- **chore**: 빌드 프로세스, 보조 도구, 라이브러리 변경

### 추가 타입 (미니 노션 특화)
- **collab**: 실시간 협업 기능 관련
- **editor**: 에디터 기능 관련
- **auth**: 인증/권한 시스템 관련
- **perf**: 성능 개선
- **security**: 보안 관련 변경
- **i18n**: 국제화 관련
- **a11y**: 접근성 개선

## 범위 (Scope)

### 프론트엔드 범위
- **editor**: Tiptap 에디터 관련
- **ui**: UI 컴포넌트 관련
- **workspace**: 워크스페이스 관련
- **auth**: 클라이언트 인증 관련
- **collab**: 실시간 협업 UI
- **hooks**: React 커스텀 훅
- **stores**: Zustand 상태 관리
- **utils**: 유틸리티 함수

### 백엔드 범위
- **api**: REST API 관련
- **auth**: 서버 인증/권한
- **db**: 데이터베이스 관련
- **prisma**: Prisma ORM 관련
- **websocket**: WebSocket 통신
- **hocuspocus**: Hocuspocus 서버
- **guards**: NestJS 가드
- **services**: 비즈니스 로직

### 공통 범위
- **shared**: 공통 라이브러리
- **contracts**: API 계약
- **config**: 설정 파일
- **docker**: Docker 관련
- **ci**: CI/CD 파이프라인
- **deps**: 의존성 관리

## 제목 (Subject) 작성 규칙

### 한글 제목 가이드라인
- **명확하고 구체적**: 무엇을 했는지 명확히 표현
- **50자 이내**: 간결하고 핵심적인 내용
- **동사로 시작**: "추가", "수정", "제거", "개선" 등
- **마침표 없음**: 제목 끝에 마침표 사용 금지
- **현재 시제**: "추가했다" (X) → "추가" (O)

### 좋은 제목 예시
```
✅ feat(editor): 드래그 앤 드롭 블록 순서 변경 기능 추가
✅ fix(auth): JWT 토큰 만료 시 자동 갱신 버그 수정
✅ refactor(api): 사용자 서비스 코드 구조 개선
✅ docs(readme): 개발 환경 설정 가이드 업데이트
✅ perf(editor): 대용량 문서 렌더링 성능 최적화
```

### 나쁜 제목 예시
```
❌ feat: 기능 추가 (너무 모호함)
❌ fix(editor): 버그를 수정했습니다. (과거 시제, 마침표)
❌ update: 코드 업데이트 (타입 불명확, 내용 모호)
❌ feat(editor): 에디터에 새로운 블록 타입인 헤딩과 리스트를 추가하고... (너무 김)
```

## 본문 (Body) 작성 가이드

### 한글 본문 규칙
- **상세한 설명**: 왜 이 변경이 필요했는지, 어떻게 구현했는지
- **72자 줄바꿈**: 가독성을 위해 적절한 줄바꿈
- **불렛 포인트 활용**: 여러 변경사항이 있을 때 목록 형태로 정리
- **기술적 세부사항**: 중요한 구현 세부사항 포함

### 본문 작성 예시
```
사용자 피드백을 반영하여 에디터의 사용성을 개선했습니다.

주요 변경사항:
- 블록 선택 시 시각적 피드백 강화
- 키보드 단축키 추가 (Ctrl+/, Cmd+/)
- 블록 타입별 아이콘 및 설명 추가
- 검색 성능 최적화 (디바운싱 적용)

기존 슬래시 커맨드는 텍스트 기반이었으나, 새로운 UI는 
시각적으로 더 직관적이며 접근성도 개선되었습니다.
```

## 푸터 (Footer) 규칙

### 이슈 참조
```
Closes #123
Fixes #456
Resolves #789
Refs #101112
```

### Breaking Changes
```
BREAKING CHANGE: API 응답 형식이 변경되었습니다.

기존: { data: {...} }
변경: { result: {...}, meta: {...} }
```

### 공동 작업자
```
Co-authored-by: 김개발 <kim@example.com>
Co-authored-by: 이프론트 <lee@example.com>
```

## 미니 노션 특화 커밋 예시

### 에디터 관련
```
feat(editor): Y.js 기반 실시간 협업 동기화 구현

여러 사용자가 동시에 문서를 편집할 때 충돌 없이 
변경사항이 실시간으로 동기화되도록 구현했습니다.

- Y.js CRDT 알고리즘 적용
- 사용자 커서 위치 실시간 표시
- 오프라인 편집 후 자동 동기화 지원
- 네트워크 단절 시 로컬 저장 및 복구

Closes #234
```

### 실시간 협업 관련
```
collab(websocket): Hocuspocus 서버 인증 시스템 통합

WebSocket 연결 시 JWT 토큰 기반 사용자 인증을 
추가하여 보안을 강화했습니다.

- 연결 시 토큰 검증 미들웨어 추가
- 권한 없는 사용자 접근 차단
- 세션 만료 시 자동 재연결 로직
- 협업 세션 로그 기록 기능

Security: 무인가 사용자 문서 접근 방지
Refs #345
```

### 성능 최적화 관련
```
perf(editor): 대용량 문서 가상 스크롤링 최적화

10MB 이상 문서에서 발생하던 렌더링 지연 문제를 
가상 스크롤링으로 해결했습니다.

성능 개선 결과:
- 초기 렌더링 시간: 3초 → 0.5초
- 메모리 사용량: 80% 감소
- 스크롤 응답성: 60fps 유지

- React.memo를 활용한 블록 컴포넌트 최적화
- Intersection Observer로 뷰포트 감지
- 블록 높이 추정 알고리즘 개선

Closes #456
```

### 버그 수정 관련
```
fix(auth): 토큰 갱신 중 무한 루프 버그 수정

JWT 토큰 만료 시 갱신 요청이 무한 반복되는 
문제를 해결했습니다.

원인: 토큰 갱신 API 호출 시에도 인터셉터가 
동작하여 재귀적으로 갱신 요청이 발생

해결: 토큰 갱신 API는 인터셉터에서 제외하고,
갱신 실패 시 로그아웃 처리 로직 추가

Fixes #567
```

## 커밋 메시지 검증

### Pre-commit Hook 설정
```bash
# .gitmessage 템플릿 설정
git config commit.template .gitmessage

# commitlint 설정으로 자동 검증
npm install -D @commitlint/cli @commitlint/config-conventional
```

### 커밋 메시지 템플릿
```
# <타입>(<범위>): <제목>
# 
# <본문>
# 
# <푸터>
#
# 타입: feat, fix, docs, style, refactor, test, chore, collab, editor, auth, perf, security
# 범위: editor, ui, api, auth, db, shared, config 등
# 제목: 50자 이내, 한글, 동사로 시작, 마침표 없음
# 본문: 72자 줄바꿈, 상세한 설명
# 푸터: Closes #123, BREAKING CHANGE 등
```

## 브랜치별 커밋 전략

### Feature 브랜치
- 기능 개발 중간 커밋도 명확한 메시지 작성
- WIP(Work In Progress) 커밋 시에도 기본 규칙 준수
- 스쿼시 머지 전 커밋 히스토리 정리

### Hotfix 브랜치
```
fix(critical): 프로덕션 데이터 손실 버그 긴급 수정

사용자 문서 삭제 시 Y.js 상태가 완전히 제거되지 않아
복구 불가능한 데이터 손실이 발생하는 치명적 버그 수정

- 문서 삭제 시 Y.js 문서 상태 완전 정리
- 삭제 전 백업 생성 로직 추가
- 관련 협업 세션 강제 종료

BREAKING CHANGE: 문서 삭제 API 응답 형식 변경
Fixes #999
```

## 다국어 프로젝트 고려사항

### 한글 커밋 메시지 장점
- **팀 내 소통**: 한국어 팀에서 더 명확한 의사소통
- **상세한 설명**: 한글로 더 자세하고 정확한 설명 가능
- **컨텍스트 이해**: 비즈니스 로직과 도메인 지식 전달 용이

### 국제화 고려사항
- **핵심 키워드**: 타입과 범위는 영어 유지 (도구 호환성)
- **이슈 번호**: GitHub 이슈 연동을 위해 영어 키워드 사용
- **기술 용어**: 널리 알려진 기술 용어는 영어 병기

## 커밋 메시지 품질 체크리스트

### 작성 전 체크
- [ ] 타입이 변경 내용과 일치하는가?
- [ ] 범위가 정확히 지정되었는가?
- [ ] 제목이 50자 이내인가?
- [ ] 제목이 명확하고 구체적인가?

### 작성 후 체크
- [ ] 다른 개발자가 이해할 수 있는가?
- [ ] 6개월 후에도 의미를 파악할 수 있는가?
- [ ] 관련 이슈나 PR이 연결되었는가?
- [ ] Breaking Change가 있다면 명시했는가?

## 자주하는 실수와 개선 방법

### 흔한 실수들
```
❌ "수정"
❌ "버그 픽스"
❌ "코드 정리"
❌ "업데이트"
❌ "feat: add feature"
```

### 개선된 버전
```
✅ fix(editor): 블록 삭제 시 포커스 이동 버그 수정
✅ refactor(api): 사용자 인증 로직 모듈화
✅ chore(deps): React 19.0.1로 업데이트
✅ feat(collab): 실시간 사용자 커서 표시 기능 추가
```

이 가이드라인을 따라 작성된 커밋 메시지는 프로젝트의 변경 이력을 명확하게 추적할 수 있게 하고, 팀 협업의 효율성을 크게 향상시킵니다.