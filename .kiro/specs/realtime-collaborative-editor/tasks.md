# 구현 계획

## 프로젝트 설정 및 인프라 구축

- [x] 1. 모노레포 구조 및 개발 환경 초기화
  - Turbo + pnpm workspace로 mini-notion-app 루트 디렉토리 생성
  - 패키지 구조 설정 (ui, editor, collaboration, auth, database, types, ai, config)
  - 공통 TypeScript, ESLint, Prettier 설정 구성
  - SQLite 데이터베이스와 Docker Compose 서비스로 개발 환경 설정
  - **추가 완료 작업:**
    - 포괄적인 테스트 프레임워크 설정 (Jest, Playwright, Testing Library)
    - 최신 라이브러리 버전 적용 (React 18.3.1, Next.js 15.1.3, TypeScript 5.7.2)
    - API 문서화 가이드라인 (JSDoc 기반 단계적 국제화 전략)
    - 라이브러리 버전 관리 자동화 도구 및 가이드라인
    - Agent Hooks 설정 (Spec 동기화, Git 워크플로우, 품질 검사)
    - 기술 부채 추적 시스템 구축
    - E2E 테스트 환경 구성 (Playwright)
    - 전체 프로젝트 빌드 성공 확인
  - **🔄 태스크 2 연결 작업 (기술부채):**
    - Database 패키지 테스트 재활성화 (Prisma 스키마 완성 후)
    - Jest Setup 파일 ES6 Import 문제 해결
    - Prisma seed.ts 파일 TypeScript 설정 수정
    - 데이터베이스 테스트 스위트 전체 활성화
  - _요구사항: 모든 요구사항이 적절한 프로젝트 구조에 의존_

- [ ] 2. 데이터베이스 스키마 및 ORM 설정
  - **✅ 완료된 작업:**
    - WorkspaceMember 스키마 충돌 문제 해결 (owner/user 관계 분리)
    - Prisma 스키마 구조 개선 (소유권과 멤버십 명확화)
  - **🔄 태스크 1 미완료 작업 해결:**
    - Database 패키지 테스트 재활성화 및 수정
    - Jest Setup 파일 ES6 Import 문제 해결 (CommonJS 변환 또는 ES6 모듈 설정)
    - Prisma seed.ts TypeScript 설정 수정 (@types/node 적용)
    - 데이터베이스 테스트 스위트 전체 검증 및 활성화
  - 다중 프로바이더 지원 Prisma 설정 (개발용 SQLite, 운영용 PostgreSQL)
  - 사용자, 워크스페이스, 페이지, 문서, 댓글, 세션 테이블 생성
  - 테스트 데이터로 데이터베이스 시딩 스크립트 구현 (사용자 5명, 워크스페이스 1개, 페이지 10개)
  - 캐싱 및 세션 관리를 위한 Redis 설정
  - _요구사항: 1.1, 1.2, 2.4, 8.1, 11.1, 13.1_

- [ ] 3. NextAuth.js를 사용한 인증 시스템 설정
  - 다중 프로바이더 인증 설정 (이메일/비밀번호, Google OAuth, GitHub OAuth)
  - 자동 갱신 기능이 있는 JWT 토큰 관리 구현
  - 5단계 권한 레벨을 가진 역할 기반 접근 제어(RBAC) 생성
  - TOTP 지원 다중 인증(MFA) 추가
  - _요구사항: 13.1, 13.2, 13.3, 13.4, 11.1, 11.2, 11.3, 11.4_

## 핵심 에디터 구현

- [ ] 4. Tiptap 기반 협업 에디터 기초 구축
  - Y.js 통합이 포함된 CollaborativeEditor 컴포넌트 생성
  - 리치 포맷팅(볼드, 이탤릭, 밑줄, 취소선, 하이라이트)을 포함한 기본 텍스트 편집 구현
  - 확장 가능한 블록 타입을 가진 블록 시스템 아키텍처 추가
  - 블록 타입 선택을 위한 슬래시 명령어 메뉴 생성
  - _요구사항: 4.1, 4.2, 2.1, 2.2_

- [ ] 5. Y.js 실시간 협업 구현
  - Y.js 문서 구조 및 CRDT 동기화 설정
  - 인증 및 문서 지속성을 가진 Hocuspocus 서버 생성
  - 커서 위치 및 사용자 존재감을 위한 인식 시스템 구현
  - 온라인 상태 표시기가 있는 실시간 사용자 목록 추가
  - _요구사항: 2.1, 2.2, 2.3, 2.4_

- [ ] 6. 고급 블록 타입 및 기능 추가
  - 적절한 계층 구조를 가진 제목 블록(H1, H2, H3) 구현
  - 중첩 지원이 있는 목록 블록(순서, 무순서, 작업 목록) 생성
  - 구문 강조 및 언어 선택이 있는 코드 블록 추가
  - 인용 블록, 구분선, 테이블 블록 구현
  - _요구사항: 4.2, 4.3_

- [ ] 7. 드래그 앤 드롭 블록 재정렬 구현
  - 시각적 드래그 표시기 및 드롭 영역 추가
  - 블록 이동의 실시간 동기화 구현
  - 동시 블록 작업에 대한 충돌 해결 처리
  - 사이드바 네비게이션에서 페이지 계층 구조 드래그 앤 드롭 추가
  - _요구사항: 4.5, 14.1, 14.2, 14.3, 14.4_

## 파일 업로드 및 미디어 관리

- [ ] 8. S3 통합 파일 업로드 시스템 생성
  - 파일 저장을 위한 AWS S3 (또는 개발용 MinIO) 설정
  - 진행률 표시기가 있는 드래그 앤 드롭 파일 업로드 구현
  - 자동 이미지 리사이징 및 최적화 추가
  - 미리보기가 있는 이미지, 비디오, 문서용 미디어 블록 생성
  - _요구사항: 4.3, 12.1, 12.2, 12.3, 12.4_

- [ ] 9. 링크 미리보기 및 임베드 기능 추가
  - 자동 링크 감지 및 미리보기 생성 구현
  - 일반적인 서비스(YouTube, Twitter 등)용 임베드 블록 생성
  - 링크 검증 및 메타데이터 추출 추가
  - 링크 미리보기 캐싱 및 업데이트 처리
  - _요구사항: 4.4_

## 워크스페이스 및 페이지 관리

- [ ] 10. 워크스페이스 관리 시스템 구축
  - 워크스페이스 생성 및 설정 관리 생성
  - 역할 할당이 있는 멤버 초대 시스템 구현
  - 워크스페이스 레벨 권한 및 접근 제어 추가
  - 워크스페이스 전환 및 네비게이션 인터페이스 생성
  - _요구사항: 1.1, 11.1, 11.2, 11.4_

- [ ] 11. 페이지 계층 구조 및 네비게이션 구현
  - 페이지 생성 및 조직 시스템 생성
  - 접을 수 있는 페이지 트리가 있는 사이드바 네비게이션 구축
  - 페이지 템플릿 및 빠른 생성 옵션 구현
  - 브레드크럼 네비게이션 및 페이지 메타데이터 표시 추가
  - _요구사항: 1.2, 1.3_

## 오프라인 지원 및 동기화

- [ ] 12. 오프라인 우선 아키텍처 구현
  - 로컬 문서 저장을 위한 IndexedDB 설정
  - 오프라인 감지 및 모드 전환 생성
  - 네트워크 중단 중 로컬 편집 기능 구현
  - 대기 중인 변경사항을 위한 동기화 큐 관리 추가
  - _요구사항: 3.1, 3.2, 3.3_

- [ ] 13. 충돌 해결 시스템 구축
  - Y.js 기반 자동 충돌 해결 구현
  - 복잡한 경우를 위한 수동 충돌 해결 UI 생성
  - 변경 추적 및 병합 시각화 추가
  - 문서 상태 복구 및 백업 시스템 처리
  - _요구사항: 3.3, 7.1, 7.2, 7.3_

## 댓글 및 협업 기능

- [ ] 14. 댓글 시스템 생성
  - 텍스트 선택 기반 댓글 생성 구현
  - 중첩된 답글이 있는 스레드 댓글 시스템 구축
  - 실시간 댓글 동기화 추가
  - 댓글 해결 및 상태 관리 생성
  - _요구사항: 8.1, 8.2, 8.3, 8.4_

- [ ] 15. 알림 시스템 추가
  - 실시간 WebSocket 알림 구현
  - 멘션 감지 및 알림 트리거 생성
  - 브라우저 푸시 알림 및 이메일 경고 추가
  - 알림 환경설정 및 관리 인터페이스 구축
  - _요구사항: 18.1, 18.2, 18.3, 18.4_

## 검색 및 네비게이션

- [ ] 16. 검색 기능 구축
  - 전문 검색을 위한 Elasticsearch 설정 (또는 MVP용 간단한 검색)
  - 실시간 문서 인덱싱 구현
  - 필터 및 제안이 있는 검색 인터페이스 생성
  - 빠른 페이지 네비게이션을 위한 키보드 단축키(Cmd+K) 추가
  - _요구사항: 9.1, 9.2, 9.3, 19.2_

- [ ] 17. 키보드 단축키 및 접근성 구현
  - 편집 작업을 위한 포괄적인 키보드 단축키 추가
  - 접근성 기능(ARIA 라벨, 키보드 네비게이션) 구현
  - 단축키 도움말 인터페이스 및 사용자 정의 옵션 생성
  - 블록 들여쓰기 제어를 위한 Tab/Shift+Tab 추가
  - _요구사항: 19.1, 19.2, 19.3, 19.4_

## AI 기반 기능

- [ ] 18. AI 문서 생성 통합
  - 콘텐츠 생성과 함께 OpenAI API 통합 설정
  - 문법 교정 및 제안이 있는 AI 작성 도우미 생성
  - 스마트 템플릿(회의록, 프로젝트 계획, 보고서) 구현
  - 콘텐츠 개선 및 번역 기능 추가
  - _요구사항: 기본 요구사항을 넘어선 향상된 사용자 경험_

- [ ] 19. AI 기반 콘텐츠 제안 구축
  - 맥락적 작성 제안 및 자동 완성 구현
  - 콘텐츠 요약 및 개요 생성 생성
  - 톤 조정 및 스타일 개선 기능 추가
  - 키보드 단축키(Cmd+Shift+G, Cmd+Shift+I)가 있는 AI 어시스턴트 UI 구축
  - _요구사항: 기본 요구사항을 넘어선 향상된 사용자 경험_

## 문서 관리 및 공유

- [ ] 20. 문서 버전 관리 및 이력 구현
  - Y.js 상태 스냅샷을 사용한 문서 버전 추적 생성
  - 차이점 시각화가 있는 버전 이력 인터페이스 구축
  - 버전 복원 및 비교 기능 추가
  - 자동 백업 및 복구 시스템 구현
  - _요구사항: 5.1, 5.2, 5.3_

- [ ] 21. 공유 및 내보내기 기능 추가
  - 권한 제어가 있는 공개 및 비공개 공유 링크 생성
  - 여러 형식(Markdown, PDF, HTML)으로 문서 내보내기 구현
  - 외부 사용자와의 협업 공유 추가
  - 공유 분석 및 접근 추적 구축
  - _요구사항: 10.1, 10.2, 10.3_

## 모바일 및 반응형 디자인

- [ ] 22. 모바일 반응형 인터페이스 구현
  - 터치 친화적인 UI 컴포넌트 및 상호작용 생성
  - 다양한 화면 크기에 적응하는 반응형 레이아웃 구현
  - 모바일 전용 네비게이션 패턴(스와이프, 드로어) 추가
  - 모바일 기기용 에디터 성능 최적화
  - _요구사항: 21.1, 21.2, 21.3_

- [ ] 23. 모바일 전용 기능 추가
  - 블록 조작을 위한 터치 제스처 구현
  - 모바일 최적화된 툴바 및 메뉴 인터페이스 생성
  - 가상 키보드 호환성 및 단축키 추가
  - 햅틱 피드백이 있는 모바일 드래그 앤 드롭 구현
  - _요구사항: 21.4_

## 테마 및 개인화

- [ ] 24. 테마 시스템 구현
  - 다크 및 라이트 테마 변형 생성
  - 시스템 테마 감지 및 자동 전환 추가
  - 테마 지속성 및 사용자 환경설정 구현
  - 코드 블록 및 구문 강조가 테마에 적응하도록 보장
  - _요구사항: 20.1, 20.2, 20.3, 20.4_

- [ ] 25. 사용자 사용자 정의 옵션 추가
  - 아바타 업로드가 있는 사용자 프로필 관리 생성
  - 에디터 환경설정(글꼴 크기, 줄 높이 등) 구현
  - 워크스페이스 사용자 정의(색상, 로고, 브랜딩) 추가
  - 알림 환경설정 및 개인정보 설정 구축
  - _요구사항: 13.5, 18.4_

## 성능 최적화 및 캐싱

- [ ] 26. 성능 최적화 구현
  - 대용량 문서를 위한 문서 가상화 추가
  - 효율적인 캐싱 전략 구현 (L1: 메모리, L2: Redis, L3: 데이터베이스)
  - 데이터베이스 작업을 위한 배치 처리 생성
  - 네트워크 데이터 전송을 위한 압축 추가
  - _요구사항: 15.1, 15.2, 15.3, 15.4, 16.1, 16.2, 16.3, 16.4_

- [ ] 27. 모니터링 및 분석 추가
  - 성능 메트릭 수집 설정 (Prometheus)
  - 오류 추적 및 보고 구현 (Sentry)
  - 시스템 상태 확인 및 경고 생성
  - 사용자 분석 및 사용량 추적 추가
  - _요구사항: 17.1, 17.2, 17.3, 17.4_

## 테스트 및 품질 보증

- [ ] 28. 포괄적인 테스트 스위트 구현
  - 모든 핵심 컴포넌트 및 서비스에 대한 단위 테스트 생성
  - Y.js 협업 및 실시간 기능에 대한 통합 테스트 구축
  - 중요한 사용자 여정을 위한 Playwright 엔드투엔드 테스트 추가
  - UI 일관성을 위한 시각적 회귀 테스트 구현
  - _요구사항: 모든 요구사항에 테스트 커버리지 필요_

- [ ] 29. 고급 테스트 전략 추가
  - 비즈니스 시나리오를 위한 Cucumber BDD 테스트 생성
  - OpenAPI 및 Pact를 사용한 계약 테스트 구현
  - Y.js CRDT 작업을 위한 속성 기반 테스트 추가
  - 부하 시나리오를 위한 Artillery 성능 테스트 설정
  - _요구사항: 모든 요구사항에 포괄적인 테스트 필요_

## API 문서화 및 개발자 도구

- [ ] 29.5. API 자동 문서화 시스템 구축
  - JSDoc 주석 자동 생성 도구 및 템플릿 구현
  - API 엔드포인트 데코레이터 및 메타데이터 수집 시스템 생성
  - JSDoc에서 OpenAPI/Swagger 스펙 자동 생성 도구 구축
  - API 문서 자동 업데이트 및 버전 관리 시스템 추가
  - _요구사항: 22.1, 22.2, 22.3, 22.4_

## DevOps 및 배포

- [ ] 30. CI/CD 파이프라인 설정
  - 품질 게이트(린트, 테스트, 빌드)가 있는 GitHub Actions 구성
  - 자동화된 보안 스캔 및 취약점 검사 구현
  - 모든 서비스에 대한 Docker 컨테이너화 설정
  - 스테이징 및 프로덕션 배포 자동화 생성
  - _요구사항: 6.1, 6.2, 6.3_

- [ ] 31. 프로덕션 인프라 구성
  - Kubernetes 배포 구성 설정
  - Hocuspocus 서버를 위한 수평 확장 구현
  - 로드 밸런싱 및 서비스 디스커버리 구성
  - 프로덕션 모니터링, 로깅 및 경고 시스템 추가
  - _요구사항: 6.1, 6.2, 6.3, 17.1, 17.2, 17.3, 17.4_

## 최종 통합 및 완성

- [ ] 32. 전체 시스템 통합 테스트 완료
  - 현실적인 시나리오에서 모든 기능이 함께 작동하는지 테스트
  - 예상 부하 조건에서 성능 검증
  - 보안 조치 및 접근 제어 검증
  - 모바일 및 데스크톱 경험의 일관성 보장
  - _요구사항: 모든 요구사항 통합 테스트_

- [ ] 33. 사용자 경험 개선 및 문서화
  - 포괄적인 사용자 문서 및 도움말 시스템 생성
  - 온보딩 플로우 및 기능 발견 구현
  - 인터페이스 전반에 걸친 상황별 도움말 및 툴팁 추가
  - 사용성 테스트 수행 및 피드백 구현
  - _요구사항: 기본 요구사항을 넘어선 향상된 사용자 경험_